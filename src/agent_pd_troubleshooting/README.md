# Agent Progressive Disclosure Troubleshooting

This project demonstrates a multi-agent troubleshooting system built using the **Google Agent Development Kit (ADK)**. It showcases how to use advanced planning, progressive disclosure, and delegation to solve complex system issues in a safe and structured manner.

## Key Concepts

### 1. ReAct Planner (`PlanReActPlanner`)
The `agent_troubleshooting_planner` utilizes the `PlanReActPlanner` to manage the troubleshooting lifecycle:
- **Analyze & Retrieve**: Based on the user's question, it retrieves relevant context (troubleshooting guides and API specs).
- **Plan**: It generates a specific troubleshooting guide tailored to the current issue.
- **Execute & Rescope**: It sends the guide to the executor agent. Based on the feedback received from the executor, the planner can rescope the next steps or finalize the report.

### 2. Progressive Disclosure
This architectural pattern ensures that agents only receive the information they need for their specific task:
- The Planner acts as a filter, only sending the **relevant context** and instructions to the executor agent.
- No unnecessary information or unrelated system state is shared, reducing noise and increasing the executor's accuracy.

### 3. AgentTool (Execution Isolation)
The `agent_troubleshooter` is wrapped in an `AgentTool` and provided to the planner.
- **Isolation**: It isolates the detailed execution information (individual API calls, raw logs) within the executor agent.
- **Abstraction**: Only the final result or high-level feedback is sent back to the Planner.
- **Efficiency**: The detailed execution information is "forgotten" by the planner, keeping the planner's context clean and focused on high-level strategy.

### 4. `include_contents="none"` (Context Optimization)
The executor agent is configured with `include_contents="none"`.
- **Stateless Focus**: This prevents the agent from sending previous conversation history to the LLM.
- **Specialization**: It forces the executor agent to focus exclusively on the troubleshooting guide currently generated by the planner, preventing historical context from interfering with the specific execution task.

### 5. `temperature=0.0` (Deterministic Output)
Both agents use `GenerateContentConfig(temperature=0.0)`.
- **Precision**: This forces the LLM to be deterministic and avoid "guessing."
- **Safety**: In troubleshooting, it is critical that the agent follows instructions exactly and reports only what it observes through tool calls.

## Project Architecture

The system consists of two specialized agents:

```mermaid
graph TD
    User([User]) -->|Reports Symptom| Planner[Troubleshooting Planner Agent]
    subgraph "Agent Troubleshooting Planner (PlanReActPlanner)"
        Planner -->|1. Search Knowledge Base| Search[search_issue_by_symptom]
        Planner -->|2. Retrieve API Specs| Docs[retrieve_service_documentation]
        Planner -->|3. Create Plan| Guide[Troubleshooting Guide]
    end
    Planner -->|4. Delegate via AgentTool| Executor[Troubleshooter Executor Agent]
    subgraph "Agent Troubleshooter (include_contents='none')"
        Executor -->|5. Follow Guide| API[execute_api_request]
        API -->|6. Return Result| Executor
    end
    Executor -->|7. Final Report| Planner
    Planner -->|8. Comprehensive Response| User
```

1.  **Troubleshooting Planner (`agent_troubleshooting_planner`)**:
    - **Role**: Senior Expert Planner using **ReAct Planner**.
    - **Tools**: `search_issue_by_symptom` (Mock VectorDB), `retrieve_service_documentation` (API Specs), and the `agent_troubleshooter` (via `AgentTool`).
    - **Workflow**: Analyzes symptoms, retrieves documentation, creates a specific troubleshooting guide, and delegates tasks to the executor agent. It remains in a loop (ReAct) to rescope or finalize based on executor feedback.

2.  **Troubleshooter Executor (`agent_troubleshooter`)**:
    - **Role**: Execution specialist utilizing **Progressive Disclosure**.
    - **Configuration**: Uses `include_contents="none"` to ensure a stateless focus on the planner's guide.
    - **Tools**: `execute_api_request`.
    - **Workflow**: Receives only the relevant troubleshooting guide and API specs from the planner. It executes the necessary API calls and provides a high-level summary back, while detailed execution context is isolated and abstracted away from the planner.

## How it Works

1.  **User Report**: A user reports a symptom.
2.  **Retrieval**: The Planner agent searches for relevant troubleshooting guides and API documentation.
3.  **Planning**: The Planner generates a detailed troubleshooting guide specific to the symptom.
4.  **Delegation**: The Planner calls the Troubleshooter agent (via `AgentTool`).
5.  **Execution**: The Troubleshooter follows the guide, calls APIs, and generates a final report.
6.  **Resolution**: The system returns a comprehensive report of the findings.
